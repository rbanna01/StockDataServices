using System.Text.Json;

namespace StockDataExternalSourceTests
{
    public class MarketStackServiceTests
    {
        private string TestData = "\r\n    {\r\n    \"pagination\": {\r\n        \"limit\": 100,\r\n        \"offset\": 0,\r\n        \"count\": 20,\r\n        \"total\": 20\r\n    },\r\n    \"data\": [\r\n        {\r\n            \"open\": 443.83,\r\n            \"high\": 451.66,\r\n            \"low\": 443.83,\r\n            \"close\": 450.5,\r\n            \"volume\": 960500.0,\r\n            \"adj_high\": 451.66,\r\n            \"adj_low\": 443.83,\r\n            \"adj_close\": 450.5,\r\n            \"adj_open\": 443.83,\r\n            \"adj_volume\": 960500.0,\r\n            \"split_factor\": 1.0,\r\n            \"dividend\": 0.0,\r\n            \"name\": \"Vertex Pharmaceuticals Inc\",\r\n            \"exchange_code\": \"NASDAQ\",\r\n            \"asset_type\": \"Stock\",\r\n            \"price_currency\": \"USD\",\r\n            \"symbol\": \"VRTX\",\r\n            \"exchange\": \"XNAS\",\r\n            \"date\": \"2025-06-06T00:00:00+0000\"\r\n        },\r\n        {\r\n            \"open\": 203.0,\r\n            \"high\": 205.7,\r\n            \"low\": 202.05,\r\n            \"close\": 203.92,\r\n            \"volume\": 46539200.0,\r\n            \"adj_high\": 205.7,\r\n            \"adj_low\": 202.05,\r\n            \"adj_close\": 203.92,\r\n            \"adj_open\": 203.0,\r\n            \"adj_volume\": 46607693.0,\r\n            \"split_factor\": 1.0,\r\n            \"dividend\": 0.0,\r\n            \"name\": \"Apple Inc\",\r\n            \"exchange_code\": \"NASDAQ\",\r\n            \"asset_type\": \"Stock\",\r\n            \"price_currency\": \"USD\",\r\n            \"symbol\": \"AAPL\",\r\n            \"exchange\": \"XNAS\",\r\n            \"date\": \"2025-06-06T00:00:00+0000\"\r\n        },\r\n        {\r\n            \"open\": 470.09,\r\n            \"high\": 473.34,\r\n            \"low\": 468.78,\r\n            \"close\": 470.38,\r\n            \"volume\": 15278600.0,\r\n            \"adj_high\": 473.335,\r\n            \"adj_low\": 468.78,\r\n            \"adj_close\": 470.38,\r\n            \"adj_open\": 470.085,\r\n            \"adj_volume\": 15285624.0,\r\n            \"split_factor\": 1.0,\r\n            \"dividend\": 0.0,\r\n            \"name\": \"Microsoft Corporation\",\r\n            \"exchange_code\": \"NASDAQ\",\r\n            \"asset_type\": \"Stock\",\r\n            \"price_currency\": \"USD\",\r\n            \"symbol\": \"MSFT\",\r\n            \"exchange\": \"XNAS\",\r\n            \"date\": \"2025-06-06T00:00:00+0000\"\r\n        },\r\n        {\r\n            \"open\": 218.0,\r\n            \"high\": 220.23,\r\n            \"low\": 217.21,\r\n            \"close\": 217.34,\r\n            \"volume\": 7582100.0,\r\n            \"adj_high\": 220.23,\r\n            \"adj_low\": 217.21,\r\n            \"adj_close\": 217.34,\r\n            \"adj_open\": 218.0,\r\n            \"adj_volume\": 7582517.0,\r\n            \"split_factor\": 1.0,\r\n            \"dividend\": 0.0,\r\n            \"name\": \"ISHARES SEMICONDUCTOR ETF \",\r\n            \"exchange_code\": \"NASDAQ\",\r\n            \"asset_type\": \"ETF\",\r\n            \"price_currency\": \"USD\",\r\n            \"symbol\": \"SOXX\",\r\n            \"exchange\": \"XNAS\",\r\n            \"date\": \"2025-06-06T00:00:00+0000\"\r\n        },\r\n        {\r\n            \"open\": 203.5,\r\n            \"high\": 204.75,\r\n            \"low\": 200.15,\r\n            \"close\": 200.63,\r\n            \"volume\": 55126100.0,\r\n            \"adj_high\": 204.75,\r\n            \"adj_low\": 200.15,\r\n            \"adj_close\": 200.63,\r\n            \"adj_open\": 203.5,\r\n            \"adj_volume\": 55221235.0,\r\n            \"split_factor\": 1.0,\r\n            \"dividend\": 0.0,\r\n            \"name\": \"Apple Inc\",\r\n            \"exchange_code\": \"NASDAQ\",\r\n            \"asset_type\": \"Stock\",\r\n            \"price_currency\": \"USD\",\r\n            \"symbol\": \"AAPL\",\r\n            \"exchange\": \"XNAS\",\r\n            \"date\": \"2025-06-05T00:00:00+0000\"\r\n        },\r\n        {\r\n            \"open\": 445.01,\r\n            \"high\": 447.49,\r\n            \"low\": 437.45,\r\n            \"close\": 443.82,\r\n            \"volume\": 1400000.0,\r\n            \"adj_high\": 447.485,\r\n            \"adj_low\": 437.45,\r\n            \"adj_close\": 443.82,\r\n            \"adj_open\": 445.01,\r\n            \"adj_volume\": 1400553.0,\r\n            \"split_factor\": 1.0,\r\n            \"dividend\": 0.0,\r\n            \"name\": \"Vertex Pharmaceuticals Inc\",\r\n            \"exchange_code\": \"NASDAQ\",\r\n            \"asset_type\": \"Stock\",\r\n            \"price_currency\": \"USD\",\r\n            \"symbol\": \"VRTX\",\r\n            \"exchange\": \"XNAS\",\r\n            \"date\": \"2025-06-05T00:00:00+0000\"\r\n        },\r\n        {\r\n            \"open\": 464.96,\r\n            \"high\": 469.65,\r\n            \"low\": 464.03,\r\n            \"close\": 467.68,\r\n            \"volume\": 20131700.0,\r\n            \"adj_high\": 469.65,\r\n            \"adj_low\": 464.03,\r\n            \"adj_close\": 467.68,\r\n            \"adj_open\": 464.955,\r\n            \"adj_volume\": 20154460.0,\r\n            \"split_factor\": 1.0,\r\n            \"dividend\": 0.0,\r\n            \"name\": \"Microsoft Corporation\",\r\n            \"exchange_code\": \"NASDAQ\",\r\n            \"asset_type\": \"Stock\",\r\n            \"price_currency\": \"USD\",\r\n            \"symbol\": \"MSFT\",\r\n            \"exchange\": \"XNAS\",\r\n            \"date\": \"2025-06-05T00:00:00+0000\"\r\n        },\r\n        {\r\n            \"open\": 218.47,\r\n            \"high\": 220.28,\r\n            \"low\": 214.41,\r\n            \"close\": 215.89,\r\n            \"volume\": 10941600.0,\r\n            \"adj_high\": 220.28,\r\n            \"adj_low\": 214.41,\r\n            \"adj_close\": 215.89,\r\n            \"adj_open\": 218.47,\r\n            \"adj_volume\": 10944227.0,\r\n            \"split_factor\": 1.0,\r\n            \"dividend\": 0.0,\r\n            \"name\": \"ISHARES SEMICONDUCTOR ETF \",\r\n            \"exchange_code\": \"NASDAQ\",\r\n            \"asset_type\": \"ETF\",\r\n            \"price_currency\": \"USD\",\r\n            \"symbol\": \"SOXX\",\r\n            \"exchange\": \"XNAS\",\r\n            \"date\": \"2025-06-05T00:00:00+0000\"\r\n        },\r\n        {\r\n            \"open\": 202.91,\r\n            \"high\": 206.24,\r\n            \"low\": 202.15,\r\n            \"close\": 202.82,\r\n            \"volume\": 42889828.0,\r\n            \"adj_high\": 206.24,\r\n            \"adj_low\": 202.1,\r\n            \"adj_close\": 202.82,\r\n            \"adj_open\": 202.91,\r\n            \"adj_volume\": 43603985.0,\r\n            \"split_factor\": 1.0,\r\n            \"dividend\": 0.0,\r\n            \"name\": \"Apple Inc\",\r\n            \"exchange_code\": \"NASDAQ\",\r\n            \"asset_type\": \"Stock\",\r\n            \"price_currency\": \"USD\",\r\n            \"symbol\": \"AAPL\",\r\n            \"exchange\": \"XNAS\",\r\n            \"date\": \"2025-06-04T00:00:00+0000\"\r\n        },\r\n        {\r\n            \"open\": 448.04,\r\n            \"high\": 453.87,\r\n            \"low\": 445.84,\r\n            \"close\": 445.85,\r\n            \"volume\": 840100.0,\r\n            \"adj_high\": 453.87,\r\n            \"adj_low\": 445.84,\r\n            \"adj_close\": 445.85,\r\n            \"adj_open\": 448.04,\r\n            \"adj_volume\": 840219.0,\r\n            \"split_factor\": 1.0,\r\n            \"dividend\": 0.0,\r\n            \"name\": \"Vertex Pharmaceuticals Inc\",\r\n            \"exchange_code\": \"NASDAQ\",\r\n            \"asset_type\": \"Stock\",\r\n            \"price_currency\": \"USD\",\r\n            \"symbol\": \"VRTX\",\r\n            \"exchange\": \"XNAS\",\r\n            \"date\": \"2025-06-04T00:00:00+0000\"\r\n        },\r\n        {\r\n            \"open\": 464.0,\r\n            \"high\": 465.69,\r\n            \"low\": 463.0201,\r\n            \"close\": 463.87,\r\n            \"volume\": 14162688.0,\r\n            \"adj_high\": 465.69,\r\n            \"adj_low\": 463.0201,\r\n            \"adj_close\": 463.87,\r\n            \"adj_open\": 464.0,\r\n            \"adj_volume\": 14162688.0,\r\n            \"split_factor\": 1.0,\r\n            \"dividend\": 0.0,\r\n            \"name\": \"Microsoft Corporation\",\r\n            \"exchange_code\": \"NASDAQ\",\r\n            \"asset_type\": \"Stock\",\r\n            \"price_currency\": \"USD\",\r\n            \"symbol\": \"MSFT\",\r\n            \"exchange\": \"XNAS\",\r\n            \"date\": \"2025-06-04T00:00:00+0000\"\r\n        },\r\n        {\r\n            \"open\": 215.39,\r\n            \"high\": 217.62,\r\n            \"low\": 213.54,\r\n            \"close\": 216.8,\r\n            \"volume\": 7337200.0,\r\n            \"adj_high\": 217.62,\r\n            \"adj_low\": 213.54,\r\n            \"adj_close\": 216.8,\r\n            \"adj_open\": 215.39,\r\n            \"adj_volume\": 7339525.0,\r\n            \"split_factor\": 1.0,\r\n            \"dividend\": 0.0,\r\n            \"name\": \"ISHARES SEMICONDUCTOR ETF \",\r\n            \"exchange_code\": \"NASDAQ\",\r\n            \"asset_type\": \"ETF\",\r\n            \"price_currency\": \"USD\",\r\n            \"symbol\": \"SOXX\",\r\n            \"exchange\": \"XNAS\",\r\n            \"date\": \"2025-06-04T00:00:00+0000\"\r\n        },\r\n        {\r\n            \"open\": 201.35,\r\n            \"high\": 203.77,\r\n            \"low\": 200.96,\r\n            \"close\": 203.27,\r\n            \"volume\": 46342500.0,\r\n            \"adj_high\": 203.77,\r\n            \"adj_low\": 200.955,\r\n            \"adj_close\": 203.27,\r\n            \"adj_open\": 201.35,\r\n            \"adj_volume\": 46381567.0,\r\n            \"split_factor\": 1.0,\r\n            \"dividend\": 0.0,\r\n            \"name\": \"Apple Inc\",\r\n            \"exchange_code\": \"NASDAQ\",\r\n            \"asset_type\": \"Stock\",\r\n            \"price_currency\": \"USD\",\r\n            \"symbol\": \"AAPL\",\r\n            \"exchange\": \"XNAS\",\r\n            \"date\": \"2025-06-03T00:00:00+0000\"\r\n        },\r\n        {\r\n            \"open\": 444.3,\r\n            \"high\": 449.845,\r\n            \"low\": 439.5425,\r\n            \"close\": 446.48,\r\n            \"volume\": 1683266.0,\r\n            \"adj_high\": 449.845,\r\n            \"adj_low\": 439.5425,\r\n            \"adj_close\": 446.48,\r\n            \"adj_open\": 444.3,\r\n            \"adj_volume\": 1683406.0,\r\n            \"split_factor\": 1.0,\r\n            \"dividend\": 0.0,\r\n            \"name\": \"Vertex Pharmaceuticals Inc\",\r\n            \"exchange_code\": \"NASDAQ\",\r\n            \"asset_type\": \"Stock\",\r\n            \"price_currency\": \"USD\",\r\n            \"symbol\": \"VRTX\",\r\n            \"exchange\": \"XNAS\",\r\n            \"date\": \"2025-06-03T00:00:00+0000\"\r\n        },\r\n        {\r\n            \"open\": 208.15,\r\n            \"high\": 214.14,\r\n            \"low\": 206.71,\r\n            \"close\": 213.62,\r\n            \"volume\": 8818500.0,\r\n            \"adj_high\": 214.14,\r\n            \"adj_low\": 206.71,\r\n            \"adj_close\": 213.62,\r\n            \"adj_open\": 208.145,\r\n            \"adj_volume\": 8905096.0,\r\n            \"split_factor\": 1.0,\r\n            \"dividend\": 0.0,\r\n            \"name\": \"ISHARES SEMICONDUCTOR ETF \",\r\n            \"exchange_code\": \"NASDAQ\",\r\n            \"asset_type\": \"ETF\",\r\n            \"price_currency\": \"USD\",\r\n            \"symbol\": \"SOXX\",\r\n            \"exchange\": \"XNAS\",\r\n            \"date\": \"2025-06-03T00:00:00+0000\"\r\n        },\r\n        {\r\n            \"open\": 461.47,\r\n            \"high\": 464.115,\r\n            \"low\": 460.8622,\r\n            \"close\": 462.97,\r\n            \"volume\": 15721919.0,\r\n            \"adj_high\": 464.14,\r\n            \"adj_low\": 460.8622,\r\n            \"adj_close\": 462.97,\r\n            \"adj_open\": 461.47,\r\n            \"adj_volume\": 15743760.0,\r\n            \"split_factor\": 1.0,\r\n            \"dividend\": 0.0,\r\n            \"name\": \"Microsoft Corporation\",\r\n            \"exchange_code\": \"NASDAQ\",\r\n            \"asset_type\": \"Stock\",\r\n            \"price_currency\": \"USD\",\r\n            \"symbol\": \"MSFT\",\r\n            \"exchange\": \"XNAS\",\r\n            \"date\": \"2025-06-03T00:00:00+0000\"\r\n        },\r\n        {\r\n            \"open\": 447.64,\r\n            \"high\": 447.98,\r\n            \"low\": 439.54,\r\n            \"close\": 445.43,\r\n            \"volume\": 1178992.0,\r\n            \"adj_high\": 447.98,\r\n            \"adj_low\": 439.54,\r\n            \"adj_close\": 445.43,\r\n            \"adj_open\": 441.27,\r\n            \"adj_volume\": 1179283.0,\r\n            \"split_factor\": 1.0,\r\n            \"dividend\": 0.0,\r\n            \"name\": \"Vertex Pharmaceuticals Inc\",\r\n            \"exchange_code\": \"NASDAQ\",\r\n            \"asset_type\": \"Stock\",\r\n            \"price_currency\": \"USD\",\r\n            \"symbol\": \"VRTX\",\r\n            \"exchange\": \"XNAS\",\r\n            \"date\": \"2025-06-02T00:00:00+0000\"\r\n        },\r\n        {\r\n            \"open\": 204.42,\r\n            \"high\": 208.83,\r\n            \"low\": 204.29,\r\n            \"close\": 208.03,\r\n            \"volume\": 5999483.0,\r\n            \"adj_high\": 208.83,\r\n            \"adj_low\": 204.29,\r\n            \"adj_close\": 208.03,\r\n            \"adj_open\": 204.42,\r\n            \"adj_volume\": 6034911.0,\r\n            \"split_factor\": 1.0,\r\n            \"dividend\": 0.0,\r\n            \"name\": \"ISHARES SEMICONDUCTOR ETF \",\r\n            \"exchange_code\": \"NASDAQ\",\r\n            \"asset_type\": \"ETF\",\r\n            \"price_currency\": \"USD\",\r\n            \"symbol\": \"SOXX\",\r\n            \"exchange\": \"XNAS\",\r\n            \"date\": \"2025-06-02T00:00:00+0000\"\r\n        },\r\n        {\r\n            \"open\": 457.0,\r\n            \"high\": 462.11,\r\n            \"low\": 456.89,\r\n            \"close\": 461.97,\r\n            \"volume\": 16546045.0,\r\n            \"adj_high\": 462.11,\r\n            \"adj_low\": 456.89,\r\n            \"adj_close\": 461.97,\r\n            \"adj_open\": 457.14,\r\n            \"adj_volume\": 16626495.0,\r\n            \"split_factor\": 1.0,\r\n            \"dividend\": 0.0,\r\n            \"name\": \"Microsoft Corporation\",\r\n            \"exchange_code\": \"NASDAQ\",\r\n            \"asset_type\": \"Stock\",\r\n            \"price_currency\": \"USD\",\r\n            \"symbol\": \"MSFT\",\r\n            \"exchange\": \"XNAS\",\r\n            \"date\": \"2025-06-02T00:00:00+0000\"\r\n        },\r\n        {\r\n            \"open\": 200.15,\r\n            \"high\": 202.13,\r\n            \"low\": 200.12,\r\n            \"close\": 201.7,\r\n            \"volume\": 35314257.0,\r\n            \"adj_high\": 202.13,\r\n            \"adj_low\": 200.12,\r\n            \"adj_close\": 201.7,\r\n            \"adj_open\": 200.28,\r\n            \"adj_volume\": 35423294.0,\r\n            \"split_factor\": 1.0,\r\n            \"dividend\": 0.0,\r\n            \"name\": \"Apple Inc\",\r\n            \"exchange_code\": \"NASDAQ\",\r\n            \"asset_type\": \"Stock\",\r\n            \"price_currency\": \"USD\",\r\n            \"symbol\": \"AAPL\",\r\n            \"exchange\": \"XNAS\",\r\n            \"date\": \"2025-06-02T00:00:00+0000\"\r\n        }\r\n    ]\r\n}\r\n    ";

        [Fact]
        public void ConversionFromJsonWorks()
        {
            StockDataExternalSource.Models.EODResponse deserializedObject = JsonSerializer.Deserialize<StockDataExternalSource.Models.EODResponse>(TestData);
            Assert.True(deserializedObject != null);
        }
    }
}